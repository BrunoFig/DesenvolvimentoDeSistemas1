<!DOCTYPE html>
<html ng-app="ChegaMais">
    <head>
        <meta charset="UTF-8">
        <title>Chega Mais!</title>

        <!-- CSS Styles Scripts-->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.7.5/angular.min.js"></script>
        <script src="https://code.angularjs.org/1.7.5/angular-messages.min.js"></script>


        <script>
            angular.module("ChegaMais", []);
            angular.module('ChegaMais', []).controller('hostCtrl', function($scope) {
                $scope.message = "Teste Host Ctrl";

                $scope.hosts = [
                    {name: "República Dauhma", city: "São Carlos"},
                    {name: "Apeor", city: "São Carlos"},
                    {name: "República Caduca", city: "Campinas"}
                ];

                $scope.cities = [
                    {name: "São Paulo", id: 1},
                    {name: "São Campinas", id: 3},
                    {name: "São Carlos", id: 5}
                ];

                $scope.addHost = function(newHost){
                    $scope.hosts.push(angular.copy(newHost));

                    delete $scope.newHost;
                    $scope.hostForm.$setPristine();
                };

                $scope.deleteHost = function(hosts){
                    $scope.hosts = hosts.filter(function (host) {
                        if (!host.selected)
                            return host;
                    });
                };

                $scope.isHostsSelected = function(hosts){
                    return !hosts.some(function (host){
                        return host.selected;
                    });
                };
            });
        </script>
    </head>
    <body>
        Hello World in HTML!

        <!-- Angular Libraries-->
        
        <!-- 
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
        -->

        <!-- jQuery 3.3.1 -->
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    
        <div ng-controller="hostCtrl" class="jumbotron">
            Mensagem: {{message}}
            <h3>Table</h3>
            <table class="table-striped">
                <tr>
                    <th></th>
                    <th>Nome</th>
                    <th>Cidade</th>
                </tr>
                <tr ng-repeat="host in hosts">
                    <td><input type="checkbox" ng-model="host.selected"></td>
                    <td>{{host.name}}</td>
                    <td>{{host.city}}</td>
                    <td>{{host}}</td>
                </tr>
            </table>
            <h3>Form</h3>
            <form name="hostForm">
                <div class="alert alert-danger" ng-show="hostForm.name.$invalid && hostForm.name.$dirty">
                    Por favor, digite um Nome.
                </div>
                <div class="alert alert-danger" ng-show="hostForm.city.$invalid && hostForm.city.$dirty">
                    Por favor, selecione uma Cidade.
                </div>
                <div>
                    <label>Nome: </label>
                    <input type="text" ng-model="newHost.name" ng-required="true" name="name" placeholder="Nome" class="form-control">
                </div>

                <div>
                    <select ng-model="newHost.city" ng-options="city.id as city.name for city in cities" ng-required="true" name="city" class="form-control">
                        <option value="">Selecione uma Cidade</option>
                    </select>
                </div>
            </form>
            <button ng-click="addHost(newHost)" ng-disabled="hostForm.$invalid" class="btn btn-primary">Adicionar Host</button>
            <button ng-click="deleteHost(hosts)" ng-disabled="isHostsSelected(hosts)" class="btn btn-danger">Deletar Host</button>
            {{newHost}}
        </div>
    </body>
</html>